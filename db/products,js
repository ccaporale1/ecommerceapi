import { response } from 'express';
const db = require('../db/index.js');

//GET ALL PRODUCTS INFO
export const getAllProducts = async () => {
    return await db.query(
        'SELECT * FROM products')
        .then((response) => response.rows);
};

//GET PRODUCTS BY CATEGORY
export const getProductsByCategory = async (category) => {
    return await db.query(
        'SELECT * FROM products WHERE category = $1', 
        [category])
        .then((response) => response.rows);
};

//GET PRODUCT BY ID
export const getProductsById = async (id) => {
    return await db.query(
        'SELECT * FROM products WHERE id = $1', 
        [id])
        .then((response) => response.rows);
};

//POST NEW PRODUCT
export const addProduct = async (product) => {
    return await db.query(
        'INSERT INTO products (name,category,price,num_in_stock) VALUES $1, $2, $3, $4', 
        [product.name,product.category,product.price,product.num_in_stock]);
};

//PUT UPDATE TO PRODUCT
export const updateProduct = async (product) => {
    return await db.query(
        'UPDATE products SET name = $1, category = $2, price = $3, num_in_stock = $4 WHERE products.id = $5', 
        [product.name,product.category,product.price,product.num_in_stock,product.id]);
};

//DELETE PRODUCT FROM INVENTORY
export const deleteProduct = async (productId) => {
    return await db.query(
        'DELETE FROM products WHERE id = $1', 
        [productId]);
};